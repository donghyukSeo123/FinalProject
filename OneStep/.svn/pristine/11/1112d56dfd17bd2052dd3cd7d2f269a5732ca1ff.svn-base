<%@ page language="java" contentType="text/html; charset=UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%>
<div class="sub-header-container">
	<header class="header navbar navbar-expand-sm">
		<ul class="navbar-nav flex-row">
			<li>
				<div class="page-header">
					<nav class="breadcrumb-one" aria-label="breadcrumb">
						<ol class="breadcrumb">
							<li class="breadcrumb-item active" aria-current="page"><span>Datatables</span></li>
						</ol>
					</nav>
				</div>
			</li>
		</ul>
		<ul class="navbar-nav d-flex align-center ml-auto right-side-filter">
			<li class="">
				<p class="current-time" id="currentTime"></p>
				<p class="current-date" id="currentDate"></p>
			</li>
		</ul>
	</header>
</div>
<!--  Navbar Ends / Breadcrumb Area  -->
<!-- Main Body Starts -->
	<div class="layout-px-spacing">
		
		<!--  모달 Start -->
	    <!-- Button trigger modal -->
	  <button type="button" class="btn btn-primary mb-2 mr-2" id="modalBtn"  data-toggle="modal" data-target="#exampleModalCenter">
	    	비교기업 추가하기
	  </button>
	  <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
	   <div  class="modal-dialog modal-dialog-centered" role="document">
	       <div class="modal-content">
	           <div class="modal-header">
	               <h5 class="modal-title" id="exampleModalCenterTitle">기업추가하기</h5>
	               <button type="button" class="close" data-dismiss="modal" aria-label="Close">
	                   <i class="las la-times"></i>
	               </button>
	           </div>
	           <div class="modal-body">
	               <h4 class="modal-heading mb-4 mt-2">기업을 검색해보세요</h4>
	               <input type="text" id="text" class="form-control" placeholder="Disabled input">
	               <div class="table-responsive" style="height: 300px;">
                                                    <table class="table mb-0" >
                                                        <thead>
                                                        <tr>
                                                            <th>#</th>
                                                            <th>기업명</th>
                                                            <th></th>
                                                            <th></th>
                                                        </tr>
                                                        </thead>
                                                        <tbody id="table">
                                                        </tbody>
                                                        
                                                    </table>
                                                </div>
	            </div>
	            <div class="modal-footer">
	                <button class="btn" data-dismiss="modal"><i class="flaticon-cancel-12"></i> Discard</button>
	                <button type="button" class="btn btn-primary">Save</button>
	            </div>
	        </div>
	    </div>
	</div>
	</div>
	
	<script type="text/javascript">

	$(function(){

		var text = $('#text');
		var html = "";		
	
		text.on("keyup",function(){
			
				$.ajax({
			 		url : "/company/searchCompany",
			 		type: "get",
			 		data:{companyName:text.val()},
			 		success: function(res){
				 		console.log(res);
			 			$("#table").html("");
			 			html="";
			 			
			 			for(let i=0; i<res.length; i++){

				 			html ="";
				 			
			 				console.log('기업명 : ' + res[i]['companyName']);	

			 				html += `<tr>`;
			 				html += "<th scope='row'>"+(i+1)+"</th>";
			 				html += '<td>'+res[i]['companyName']+'</td>';
			 				html += `<td> </td>`;
			 				html += "<td><button id="+"'append"+i+"'" + " class='btn btn-primary mb-2 mr-2'>추가</button></td>";
			 				html += `</tr>`;

			 				$("#table").append(html);
			 				
				 			}
	 			
	 					}
	 		
	 			});
				
			
		});

	});
	</script>
	<script type="text/javascript">
	
	
	</script>
